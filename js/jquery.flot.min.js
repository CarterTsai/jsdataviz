(function(e){e.color={};e.color.make=function(t,n,r,i){var s={};s.r=t||0;s.g=n||0;s.b=r||0;s.a=i!=null?i:1;s.add=function(e,t){for(var n=0;n<e.length;++n)s[e.charAt(n)]+=t;return s.normalize()};s.scale=function(e,t){for(var n=0;n<e.length;++n)s[e.charAt(n)]*=t;return s.normalize()};s.toString=function(){return s.a>=1?"rgb("+[s.r,s.g,s.b].join(",")+")":"rgba("+[s.r,s.g,s.b,s.a].join(",")+")"};s.normalize=function(){function e(e,t,n){return t<e?e:t>n?n:t}s.r=e(0,parseInt(s.r),255);s.g=e(0,parseInt(s.g),255);s.b=e(0,parseInt(s.b),255);s.a=e(0,s.a,1);return s};s.clone=function(){return e.color.make(s.r,s.b,s.g,s.a)};return s.normalize()};e.color.extract=function(t,n){var r;do{r=t.css(n).toLowerCase();if(r!=""&&r!="transparent")break;t=t.parent()}while(!e.nodeName(t.get(0),"body"));r=="rgba(0, 0, 0, 0)"&&(r="transparent");return e.color.parse(r)};e.color.parse=function(n){var r,i=e.color.make;if(r=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n))return i(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10));if(r=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return i(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),parseFloat(r[4]));if(r=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(n))return i(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55);if(r=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n))return i(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55,parseFloat(r[4]));if(r=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n))return i(parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16));if(r=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(n))return i(parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16));var s=e.trim(n).toLowerCase();if(s=="transparent")return i(255,255,255,0);r=t[s]||[0,0,0];return i(r[0],r[1],r[2])};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);(function(e){function t(t,r,i,s){function S(e,t){t=[E].concat(t);for(var n=0;n<e.length;++n)e[n].apply(this,t)}function x(){for(var t=0;t<s.length;++t){var n=s[t];n.init(E);n.options&&e.extend(!0,u,n.options)}}function T(t){var n;e.extend(!0,u,t);u.xaxis.color==null&&(u.xaxis.color=u.grid.color);u.yaxis.color==null&&(u.yaxis.color=u.grid.color);u.xaxis.tickColor==null&&(u.xaxis.tickColor=u.grid.tickColor);u.yaxis.tickColor==null&&(u.yaxis.tickColor=u.grid.tickColor);u.grid.borderColor==null&&(u.grid.borderColor=u.grid.color);u.grid.tickColor==null&&(u.grid.tickColor=e.color.parse(u.grid.color).scale("a",.22).toString());for(n=0;n<Math.max(1,u.xaxes.length);++n)u.xaxes[n]=e.extend(!0,{},u.xaxis,u.xaxes[n]);for(n=0;n<Math.max(1,u.yaxes.length);++n)u.yaxes[n]=e.extend(!0,{},u.yaxis,u.yaxes[n]);u.xaxis.noTicks&&u.xaxis.ticks==null&&(u.xaxis.ticks=u.xaxis.noTicks);u.yaxis.noTicks&&u.yaxis.ticks==null&&(u.yaxis.ticks=u.yaxis.noTicks);if(u.x2axis){u.xaxes[1]=e.extend(!0,{},u.xaxis,u.x2axis);u.xaxes[1].position="top"}if(u.y2axis){u.yaxes[1]=e.extend(!0,{},u.yaxis,u.y2axis);u.yaxes[1].position="right"}u.grid.coloredAreas&&(u.grid.markings=u.grid.coloredAreas);u.grid.coloredAreasColor&&(u.grid.markingsColor=u.grid.coloredAreasColor);u.lines&&e.extend(!0,u.series.lines,u.lines);u.points&&e.extend(!0,u.series.points,u.points);u.bars&&e.extend(!0,u.series.bars,u.bars);u.shadowSize!=null&&(u.series.shadowSize=u.shadowSize);u.highlightColor!=null&&(u.series.highlightColor=u.highlightColor);for(n=0;n<u.xaxes.length;++n)M(p,n+1).options=u.xaxes[n];for(n=0;n<u.yaxes.length;++n)M(d,n+1).options=u.yaxes[n];for(var r in w)u.hooks[r]&&u.hooks[r].length&&(w[r]=w[r].concat(u.hooks[r]));S(w.processOptions,[u])}function N(e){o=C(e);_();D()}function C(t){var n=[];for(var r=0;r<t.length;++r){var i=e.extend(!0,{},u.series);if(t[r].data!=null){i.data=t[r].data;delete t[r].data;e.extend(!0,i,t[r]);t[r].data=i.data}else i.data=t[r];n.push(i)}return n}function k(e,t){var n=e[t+"axis"];typeof n=="object"&&(n=n.n);typeof n!="number"&&(n=1);return n}function L(){return e.grep(p.concat(d),function(e){return e})}function A(e){var t={},n,r;for(n=0;n<p.length;++n){r=p[n];r&&r.used&&(t["x"+r.n]=r.c2p(e.left))}for(n=0;n<d.length;++n){r=d[n];r&&r.used&&(t["y"+r.n]=r.c2p(e.top))}t.x1!==undefined&&(t.x=t.x1);t.y1!==undefined&&(t.y=t.y1);return t}function O(e){var t={},n,r,i;for(n=0;n<p.length;++n){r=p[n];if(r&&r.used){i="x"+r.n;e[i]==null&&r.n==1&&(i="x");if(e[i]!=null){t.left=r.p2c(e[i]);break}}}for(n=0;n<d.length;++n){r=d[n];if(r&&r.used){i="y"+r.n;e[i]==null&&r.n==1&&(i="y");if(e[i]!=null){t.top=r.p2c(e[i]);break}}}return t}function M(t,n){t[n-1]||(t[n-1]={n:n,direction:t==p?"x":"y",options:e.extend(!0,{},t==p?u.xaxis:u.yaxis)});return t[n-1]}function _(){var t=o.length,n=-1,r;for(r=0;r<o.length;++r){var i=o[r].color;if(i!=null){t--;typeof i=="number"&&i>n&&(n=i)}}t<=n&&(t=n+1);var s,a=[],f=u.colors,l=f.length,c=0;for(r=0;r<t;r++){s=e.color.parse(f[r%l]||"#666");r%l==0&&r&&(c>=0?c<.5?c=-c-.2:c=0:c=-c);a[r]=s.scale("rgb",1+c)}var h=0,v;for(r=0;r<o.length;++r){v=o[r];if(v.color==null){v.color=a[h].toString();++h}else typeof v.color=="number"&&(v.color=a[v.color].toString());if(v.lines.show==null){var m,g=!0;for(m in v)if(v[m]&&v[m].show){g=!1;break}g&&(v.lines.show=!0)}v.lines.zero==null&&(v.lines.zero=!!v.lines.fill);v.xaxis=M(p,k(v,"x"));v.yaxis=M(d,k(v,"y"))}}function D(){function x(e,t,n){t<e.datamin&&t!=-r&&(e.datamin=t);n>e.datamax&&n!=r&&(e.datamax=n)}var t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.MAX_VALUE,i,s,u,a,f,l,c,h,p,d,v,m,g,y,b,E;e.each(L(),function(e,r){r.datamin=t;r.datamax=n;r.used=!1});for(i=0;i<o.length;++i){l=o[i];l.datapoints={points:[]};S(w.processRawData,[l,l.data,l.datapoints])}for(i=0;i<o.length;++i){l=o[i];b=l.data;E=l.datapoints.format;if(!E){E=[];E.push({x:!0,number:!0,required:!0});E.push({y:!0,number:!0,required:!0});if(l.bars.show||l.lines.show&&l.lines.fill){var T=!!(l.bars.show&&l.bars.zero||l.lines.show&&l.lines.zero);E.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:T});if(l.bars.horizontal){delete E[E.length-1].y;E[E.length-1].x=!0}}l.datapoints.format=E}if(l.datapoints.pointsize!=null)continue;l.datapoints.pointsize=E.length;h=l.datapoints.pointsize;c=l.datapoints.points;var N=l.lines.show&&l.lines.steps;l.xaxis.used=l.yaxis.used=!0;for(s=u=0;s<b.length;++s,u+=h){y=b[s];var C=y==null;if(!C)for(a=0;a<h;++a){m=y[a];g=E[a];if(g){if(g.number&&m!=null){m=+m;isNaN(m)?m=null:m==Infinity?m=r:m==-Infinity&&(m=-r)}if(m==null){g.required&&(C=!0);g.defaultValue!=null&&(m=g.defaultValue)}}c[u+a]=m}if(C)for(a=0;a<h;++a){m=c[u+a];if(m!=null){g=E[a];g.x&&x(l.xaxis,m,m);g.y&&x(l.yaxis,m,m)}c[u+a]=null}else if(N&&u>0&&c[u-h]!=null&&c[u-h]!=c[u]&&c[u-h+1]!=c[u+1]){for(a=0;a<h;++a)c[u+h+a]=c[u+a];c[u+1]=c[u-h+1];u+=h}}}for(i=0;i<o.length;++i){l=o[i];S(w.processDatapoints,[l,l.datapoints])}for(i=0;i<o.length;++i){l=o[i];c=l.datapoints.points,h=l.datapoints.pointsize;E=l.datapoints.format;var k=t,A=t,O=n,M=n;for(s=0;s<c.length;s+=h){if(c[s]==null)continue;for(a=0;a<h;++a){m=c[s+a];g=E[a];if(!g||g.autoscale===!1||m==r||m==-r)continue;if(g.x){m<k&&(k=m);m>O&&(O=m)}if(g.y){m<A&&(A=m);m>M&&(M=m)}}}if(l.bars.show){var _;switch(l.bars.align){case"left":_=0;break;case"right":_=-l.bars.barWidth;break;case"center":_=-l.bars.barWidth/2;break;default:throw new Error("Invalid bar alignment: "+l.bars.align)}if(l.bars.horizontal){A+=_;M+=_+l.bars.barWidth}else{k+=_;O+=_+l.bars.barWidth}}x(l.xaxis,k,O);x(l.yaxis,A,M)}e.each(L(),function(e,r){r.datamin==t&&(r.datamin=null);r.datamax==n&&(r.datamax=null)})}function P(e){var t=window.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}function H(n){var r=document.createElement("canvas");r.className=n;e(r).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(t);if(!r.getContext){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");r=window.G_vmlCanvasManager.initElement(r)}var i=r.getContext("2d"),s=P(i);r.width=m*s;r.height=g*s;r.style.width=m+"px";r.style.height=g+"px";i.save();i.scale(s,s);return r}function B(){m=t.width();g=t.height();if(m<=0||g<=0)throw new Error("Invalid dimensions for plot, width = "+m+", height = "+g)}function j(e){var t=e.getContext("2d"),n=P(t);if(e.style.width!=m){e.width=m*n;e.style.width=m+"px"}if(e.style.height!=g){e.height=g*n;e.style.height=g+"px"}t.restore();t.save();t.scale(n,n)}function F(){var n,r=t.children("canvas.flot-base"),i=t.children("canvas.flot-overlay");if(r.length==0||i==0){t.html("");t.css({padding:0});t.css("position")=="static"&&t.css("position","relative");B();a=H("flot-base");f=H("flot-overlay");n=!1}else{a=r.get(0);f=i.get(0);n=!0}c=a.getContext("2d");h=f.getContext("2d");l=e(f);if(n){t.data("plot").shutdown();E.resize();h.clearRect(0,0,m,g);l.unbind();t.children().not([a,f]).remove()}t.data("plot",E)}function I(){if(u.grid.hoverable){l.mousemove(pt);l.bind("mouseleave",dt)}u.grid.clickable&&l.click(vt);S(w.bindEvents,[l])}function q(){ct&&clearTimeout(ct);l.unbind("mousemove",pt);l.unbind("mouseleave",dt);l.unbind("click",vt);S(w.shutdown,[l])}function R(e){function t(e){return e}var n,r,i=e.options.transform||t,s=e.options.inverseTransform;if(e.direction=="x"){n=e.scale=y/Math.abs(i(e.max)-i(e.min));r=Math.min(i(e.max),i(e.min))}else{n=e.scale=b/Math.abs(i(e.max)-i(e.min));n=-n;r=Math.max(i(e.max),i(e.min))}i==t?e.p2c=function(e){return(e-r)*n}:e.p2c=function(e){return(i(e)-r)*n};s?e.c2p=function(e){return s(r+e/n)}:e.c2p=function(e){return r+e/n}}function U(e){var t=e.options,n=e.ticks||[],r=t.labelWidth||0,i=t.labelHeight||0,s=e.font;c.save();c.font=s.style+" "+s.variant+" "+s.weight+" "+s.size+"px '"+s.family+"'";for(var o=0;o<n.length;++o){var u=n[o];u.lines=[];u.width=u.height=0;if(!u.label)continue;var a=(u.label+"").replace(/<br ?\/?>|\r\n|\r/g,"\n").split("\n");for(var f=0;f<a.length;++f){var l={text:a[f]},h=c.measureText(l.text);l.width=h.width;l.height=h.height!=null?h.height:s.size;l.height+=Math.round(s.size*.15);u.width=Math.max(l.width,u.width);u.height+=l.height;u.lines.push(l)}t.labelWidth==null&&(r=Math.max(r,u.width));t.labelHeight==null&&(i=Math.max(i,u.height))}c.restore();e.labelWidth=Math.ceil(r);e.labelHeight=Math.ceil(i)}function z(t){var n=t.labelWidth,r=t.labelHeight,i=t.options.position,s=t.options.tickLength,o=u.grid.axisMargin,a=u.grid.labelMargin,f=t.direction=="x"?p:d,l,c,h=e.grep(f,function(e){return e&&e.options.position==i&&e.reserveSpace});e.inArray(t,h)==h.length-1&&(o=0);if(s==null){var y=e.grep(f,function(e){return e&&e.reserveSpace});c=e.inArray(t,y)==0;c?s="full":s=5}isNaN(+s)||(a+=+s);if(t.direction=="x"){r+=a;if(i=="bottom"){v.bottom+=r+o;t.box={top:g-v.bottom,height:r}}else{t.box={top:v.top+o,height:r};v.top+=r+o}}else{n+=a;if(i=="left"){t.box={left:v.left+o,width:n};v.left+=n+o}else{v.right+=n+o;t.box={left:m-v.right,width:n}}}t.position=i;t.tickLength=s;t.box.padding=a;t.innermost=c}function W(e){if(e.direction=="x"){e.box.left=v.left-e.labelWidth/2;e.box.width=m-v.left-v.right+e.labelWidth}else{e.box.top=v.top-e.labelHeight/2;e.box.height=g-v.bottom-v.top+e.labelHeight}}function X(){var t=u.grid.minBorderMargin,n={x:0,y:0},r,i;if(t==null){t=0;for(r=0;r<o.length;++r)t=Math.max(t,2*(o[r].points.radius+o[r].points.lineWidth/2))}n.x=n.y=Math.ceil(t);e.each(L(),function(e,t){var r=t.direction;t.reserveSpace&&(n[r]=Math.ceil(Math.max(n[r],(r=="x"?t.labelWidth:t.labelHeight)/2)))});v.left=Math.max(n.x,v.left);v.right=Math.max(n.x,v.right);v.top=Math.max(n.y,v.top);v.bottom=Math.max(n.y,v.bottom)}function V(){var n,r=L(),i=u.grid.show;for(var s in v){var o=u.grid.margin||0;v[s]=typeof o=="number"?o:o[s]||0}S(w.processOffset,[v]);for(var s in v)typeof u.grid.borderWidth=="object"?v[s]=i?u.grid.borderWidth[s]:0:v[s]=i?u.grid.borderWidth:0;e.each(r,function(e,t){t.show=t.options.show;t.show==null&&(t.show=t.used);t.reserveSpace=t.show||t.options.reserveSpace;J(t)});if(i){var a={style:t.css("font-style"),size:Math.round(.8*(+t.css("font-size").replace("px","")||13)),variant:t.css("font-variant"),weight:t.css("font-weight"),family:t.css("font-family")},f=e.grep(r,function(e){return e.reserveSpace});e.each(f,function(t,n){K(n);Q(n);G(n,n.ticks);n.font=e.extend({},a,n.options.font);U(n)});for(n=f.length-1;n>=0;--n)z(f[n]);X();e.each(f,function(e,t){W(t)})}y=m-v.left-v.right;b=g-v.bottom-v.top;e.each(r,function(e,t){R(t)});ft()}function J(e){var t=e.options,n=+(t.min!=null?t.min:e.datamin),r=+(t.max!=null?t.max:e.datamax),i=r-n;if(i==0){var s=r==0?1:.01;t.min==null&&(n-=s);if(t.max==null||t.min!=null)r+=s}else{var o=t.autoscaleMargin;if(o!=null){if(t.min==null){n-=i*o;n<0&&e.datamin!=null&&e.datamin>=0&&(n=0)}if(t.max==null){r+=i*o;r>0&&e.datamax!=null&&e.datamax<=0&&(r=0)}}}e.min=n;e.max=r}function K(t){var r=t.options,i;typeof r.ticks=="number"&&r.ticks>0?i=r.ticks:i=.3*Math.sqrt(t.direction=="x"?m:g);t.delta=(t.max-t.min)/i;if(r.mode=="time"&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(!t.tickGenerator){var s=r.tickDecimals,o=-Math.floor(Math.log(t.delta)/Math.LN10);s!=null&&o>s&&(o=s);var u=Math.pow(10,-o),a=t.delta/u,f;if(a<1.5)f=1;else if(a<3){f=2;if(a>2.25&&(s==null||o+1<=s)){f=2.5;++o}}else a<7.5?f=5:f=10;f*=u;r.minTickSize!=null&&f<r.minTickSize&&(f=r.minTickSize);t.tickDecimals=Math.max(0,s!=null?s:o);t.tickSize=r.tickSize||f;t.tickGenerator=function(e){var t=[],r=n(e.min,e.tickSize),i=0,s=Number.NaN,o;do{o=s;s=r+i*e.tickSize;t.push(s);++i}while(s<e.max&&s!=o);return t};t.tickFormatter=function(e,t){var n=Math.pow(10,t.tickDecimals),r=""+Math.round(e*n)/n;if(t.tickDecimals!=null){var i=r.indexOf("."),s=i==-1?0:r.length-i-1;if(s<t.tickDecimals)return(s?r:r+".")+(""+n).substr(1,t.tickDecimals-s)}return r}}e.isFunction(r.tickFormatter)&&(t.tickFormatter=function(e,t){return""+r.tickFormatter(e,t)});if(r.alignTicksWithAxis!=null){var l=(t.direction=="x"?p:d)[r.alignTicksWithAxis-1];if(l&&l.used&&l!=t){var c=t.tickGenerator(t);if(c.length>0){r.min==null&&(t.min=Math.min(t.min,c[0]));r.max==null&&c.length>1&&(t.max=Math.max(t.max,c[c.length-1]))}t.tickGenerator=function(e){var t=[],n,r;for(r=0;r<l.ticks.length;++r){n=(l.ticks[r].v-l.min)/(l.max-l.min);n=e.min+n*(e.max-e.min);t.push(n)}return t};if(!t.mode&&r.tickDecimals==null){var h=Math.max(0,-Math.floor(Math.log(t.delta)/Math.LN10)+1),v=t.tickGenerator(t);v.length>1&&/\..*0$/.test((v[1]-v[0]).toFixed(h))||(t.tickDecimals=h)}}}}function Q(t){var n=t.options.ticks,r=[];n==null||typeof n=="number"&&n>0?r=t.tickGenerator(t):n&&(e.isFunction(n)?r=n(t):r=n);var i,s;t.ticks=[];for(i=0;i<r.length;++i){var o=null,u=r[i];if(typeof u=="object"){s=+u[0];u.length>1&&(o=u[1])}else s=+u;o==null&&(o=t.tickFormatter(s,t));isNaN(s)||t.ticks.push({v:s,label:o})}}function G(e,t){if(e.options.autoscaleMargin&&t.length>0){e.options.min==null&&(e.min=Math.min(e.min,t[0].v));e.options.max==null&&t.length>1&&(e.max=Math.max(e.max,t[t.length-1].v))}}function Y(){c.clearRect(0,0,m,g);S(w.drawBackground,[c]);var e=u.grid;e.show&&e.backgroundColor&&et();if(e.show&&!e.aboveData){tt();nt()}for(var t=0;t<o.length;++t){S(w.drawSeries,[c,o[t]]);rt(o[t])}S(w.draw,[c]);if(e.show&&e.aboveData){tt();nt()}}function Z(e,t){var n,r,i,s,o=L();for(var u=0;u<o.length;++u){n=o[u];if(n.direction==t){s=t+n.n+"axis";!e[s]&&n.n==1&&(s=t+"axis");if(e[s]){r=e[s].from;i=e[s].to;break}}}if(!e[s]){n=t=="x"?p[0]:d[0];r=e[t+"1"];i=e[t+"2"]}if(r!=null&&i!=null&&r>i){var a=r;r=i;i=a}return{from:r,to:i,axis:n}}function et(){c.save();c.translate(v.left,v.top);c.fillStyle=Tt(u.grid.backgroundColor,b,0,"rgba(255, 255, 255, 0)");c.fillRect(0,0,y,b);c.restore()}function tt(){var t,n,r,i;c.save();c.translate(v.left,v.top);var s=u.grid.markings;if(s){if(e.isFunction(s)){n=E.getAxes();n.xmin=n.xaxis.min;n.xmax=n.xaxis.max;n.ymin=n.yaxis.min;n.ymax=n.yaxis.max;s=s(n)}for(t=0;t<s.length;++t){var o=s[t],a=Z(o,"x"),f=Z(o,"y");a.from==null&&(a.from=a.axis.min);a.to==null&&(a.to=a.axis.max);f.from==null&&(f.from=f.axis.min);f.to==null&&(f.to=f.axis.max);if(a.to<a.axis.min||a.from>a.axis.max||f.to<f.axis.min||f.from>f.axis.max)continue;a.from=Math.max(a.from,a.axis.min);a.to=Math.min(a.to,a.axis.max);f.from=Math.max(f.from,f.axis.min);f.to=Math.min(f.to,f.axis.max);if(a.from==a.to&&f.from==f.to)continue;a.from=a.axis.p2c(a.from);a.to=a.axis.p2c(a.to);f.from=f.axis.p2c(f.from);f.to=f.axis.p2c(f.to);if(a.from==a.to||f.from==f.to){c.beginPath();c.strokeStyle=o.color||u.grid.markingsColor;c.lineWidth=o.lineWidth||u.grid.markingsLineWidth;c.moveTo(a.from,f.from);c.lineTo(a.to,f.to);c.stroke()}else{c.fillStyle=o.color||u.grid.markingsColor;c.fillRect(a.from,f.to,a.to-a.from,f.from-f.to)}}}n=L();r=u.grid.borderWidth;for(var l=0;l<n.length;++l){var h=n[l],p=h.box,d=h.tickLength,m,g,w,S;if(!h.show||h.ticks.length==0)continue;c.strokeStyle=h.options.tickColor||e.color.parse(h.options.color).scale("a",.22).toString();c.lineWidth=1;if(h.direction=="x"){m=0;d=="full"?g=h.position=="top"?0:b:g=p.top-v.top+(h.position=="top"?p.height:0)}else{g=0;d=="full"?m=h.position=="left"?0:y:m=p.left-v.left+(h.position=="left"?p.width:0)}if(!h.innermost){c.beginPath();w=S=0;h.direction=="x"?w=y:S=b;if(c.lineWidth==1){m=Math.floor(m)+.5;g=Math.floor(g)+.5}c.moveTo(m,g);c.lineTo(m+w,g+S);c.stroke()}c.beginPath();for(t=0;t<h.ticks.length;++t){var x=h.ticks[t].v;w=S=0;if(x<h.min||x>h.max||d=="full"&&(typeof r=="object"&&r[h.position]>0||r>0)&&(x==h.min||x==h.max))continue;if(h.direction=="x"){m=h.p2c(x);S=d=="full"?-b:d;h.position=="top"&&(S=-S)}else{g=h.p2c(x);w=d=="full"?-y:d;h.position=="left"&&(w=-w)}c.lineWidth==1&&(h.direction=="x"?m=Math.floor(m)+.5:g=Math.floor(g)+.5);c.moveTo(m,g);c.lineTo(m+w,g+S)}c.stroke()}if(r){i=u.grid.borderColor;if(typeof r=="object"||typeof i=="object"){typeof r!="object"&&(r={top:r,right:r,bottom:r,left:r});typeof i!="object"&&(i={top:i,right:i,bottom:i,left:i});if(r.top>0){c.strokeStyle=i.top;c.lineWidth=r.top;c.beginPath();c.moveTo(0-r.left,0-r.top/2);c.lineTo(y,0-r.top/2);c.stroke()}if(r.right>0){c.strokeStyle=i.right;c.lineWidth=r.right;c.beginPath();c.moveTo(y+r.right/2,0-r.top);c.lineTo(y+r.right/2,b);c.stroke()}if(r.bottom>0){c.strokeStyle=i.bottom;c.lineWidth=r.bottom;c.beginPath();c.moveTo(y+r.right,b+r.bottom/2);c.lineTo(0,b+r.bottom/2);c.stroke()}if(r.left>0){c.strokeStyle=i.left;c.lineWidth=r.left;c.beginPath();c.moveTo(0-r.left/2,b+r.bottom);c.lineTo(0-r.left/2,0);c.stroke()}}else{c.lineWidth=r;c.strokeStyle=u.grid.borderColor;c.strokeRect(-r/2,-r/2,y+r,b+r)}}c.restore()}function nt(){c.save();e.each(L(),function(e,t){if(!t.show||t.ticks.length==0)return;var n=t.box,r=t.font;c.fillStyle=t.options.color;c.font=r.style+" "+r.variant+" "+r.weight+" "+r.size+"px "+r.family;c.textAlign="start";c.textBaseline="middle";for(var i=0;i<t.ticks.length;++i){var s=t.ticks[i];if(!s.label||s.v<t.min||s.v>t.max)continue;var o,u,a=0,f;for(var l=0;l<s.lines.length;++l){f=s.lines[l];if(t.direction=="x"){o=v.left+t.p2c(s.v)-f.width/2;t.position=="bottom"?u=n.top+n.padding:u=n.top+n.height-n.padding-s.height}else{u=v.top+t.p2c(s.v)-s.height/2;t.position=="left"?o=n.left+n.width-n.padding-f.width:o=n.left+n.padding}u+=f.height/2+a;a+=f.height;if(!!(window.opera&&window.opera.version().split(".")[0]<12)){o=Math.floor(o);u=Math.ceil(u-2)}c.fillText(f.text,o,u)}}});c.restore()}function rt(e){e.lines.show&&it(e);e.bars.show&&ut(e);e.points.show&&st(e)}function it(e){function t(e,t,n,r,i){var s=e.points,o=e.pointsize,u=null,a=null;c.beginPath();for(var f=o;f<s.length;f+=o){var l=s[f-o],h=s[f-o+1],p=s[f],d=s[f+1];if(l==null||p==null)continue;if(h<=d&&h<i.min){if(d<i.min)continue;l=(i.min-h)/(d-h)*(p-l)+l;h=i.min}else if(d<=h&&d<i.min){if(h<i.min)continue;p=(i.min-h)/(d-h)*(p-l)+l;d=i.min}if(h>=d&&h>i.max){if(d>i.max)continue;l=(i.max-h)/(d-h)*(p-l)+l;h=i.max}else if(d>=h&&d>i.max){if(h>i.max)continue;p=(i.max-h)/(d-h)*(p-l)+l;d=i.max}if(l<=p&&l<r.min){if(p<r.min)continue;h=(r.min-l)/(p-l)*(d-h)+h;l=r.min}else if(p<=l&&p<r.min){if(l<r.min)continue;d=(r.min-l)/(p-l)*(d-h)+h;p=r.min}if(l>=p&&l>r.max){if(p>r.max)continue;h=(r.max-l)/(p-l)*(d-h)+h;l=r.max}else if(p>=l&&p>r.max){if(l>r.max)continue;d=(r.max-l)/(p-l)*(d-h)+h;p=r.max}(l!=u||h!=a)&&c.moveTo(r.p2c(l)+t,i.p2c(h)+n);u=p;a=d;c.lineTo(r.p2c(p)+t,i.p2c(d)+n)}c.stroke()}function n(e,t,n){var r=e.points,i=e.pointsize,s=Math.min(Math.max(0,n.min),n.max),o=0,u,a=!1,f=1,l=0,h=0;for(;;){if(i>0&&o>r.length+i)break;o+=i;var p=r[o-i],d=r[o-i+f],v=r[o],m=r[o+f];if(a){if(i>0&&p!=null&&v==null){h=o;i=-i;f=2;continue}if(i<0&&o==l+i){c.fill();a=!1;i=-i;f=1;o=l=h+i;continue}}if(p==null||v==null)continue;if(p<=v&&p<t.min){if(v<t.min)continue;d=(t.min-p)/(v-p)*(m-d)+d;p=t.min}else if(v<=p&&v<t.min){if(p<t.min)continue;m=(t.min-p)/(v-p)*(m-d)+d;v=t.min}if(p>=v&&p>t.max){if(v>t.max)continue;d=(t.max-p)/(v-p)*(m-d)+d;p=t.max}else if(v>=p&&v>t.max){if(p>t.max)continue;m=(t.max-p)/(v-p)*(m-d)+d;v=t.max}if(!a){c.beginPath();c.moveTo(t.p2c(p),n.p2c(s));a=!0}if(d>=n.max&&m>=n.max){c.lineTo(t.p2c(p),n.p2c(n.max));c.lineTo(t.p2c(v),n.p2c(n.max));continue}if(d<=n.min&&m<=n.min){c.lineTo(t.p2c(p),n.p2c(n.min));c.lineTo(t.p2c(v),n.p2c(n.min));continue}var g=p,y=v;if(d<=m&&d<n.min&&m>=n.min){p=(n.min-d)/(m-d)*(v-p)+p;d=n.min}else if(m<=d&&m<n.min&&d>=n.min){v=(n.min-d)/(m-d)*(v-p)+p;m=n.min}if(d>=m&&d>n.max&&m<=n.max){p=(n.max-d)/(m-d)*(v-p)+p;d=n.max}else if(m>=d&&m>n.max&&d<=n.max){v=(n.max-d)/(m-d)*(v-p)+p;m=n.max}p!=g&&c.lineTo(t.p2c(g),n.p2c(d));c.lineTo(t.p2c(p),n.p2c(d));c.lineTo(t.p2c(v),n.p2c(m));if(v!=y){c.lineTo(t.p2c(v),n.p2c(m));c.lineTo(t.p2c(y),n.p2c(m))}}}c.save();c.translate(v.left,v.top);c.lineJoin="round";var r=e.lines.lineWidth,i=e.shadowSize;if(r>0&&i>0){c.lineWidth=i;c.strokeStyle="rgba(0,0,0,0.1)";var s=Math.PI/18;t(e.datapoints,Math.sin(s)*(r/2+i/2),Math.cos(s)*(r/2+i/2),e.xaxis,e.yaxis);c.lineWidth=i/2;t(e.datapoints,Math.sin(s)*(r/2+i/4),Math.cos(s)*(r/2+i/4),e.xaxis,e.yaxis)}c.lineWidth=r;c.strokeStyle=e.color;var o=at(e.lines,e.color,0,b);if(o){c.fillStyle=o;n(e.datapoints,e.xaxis,e.yaxis)}r>0&&t(e.datapoints,0,0,e.xaxis,e.yaxis);c.restore()}function st(e){function t(e,t,n,r,i,s,o,u){var a=e.points,f=e.pointsize;for(var l=0;l<a.length;l+=f){var h=a[l],p=a[l+1];if(h==null||h<s.min||h>s.max||p<o.min||p>o.max)continue;c.beginPath();h=s.p2c(h);p=o.p2c(p)+r;u=="circle"?c.arc(h,p,t,0,i?Math.PI:Math.PI*2,!1):u(c,h,p,t,i);c.closePath();if(n){c.fillStyle=n;c.fill()}c.stroke()}}c.save();c.translate(v.left,v.top);var n=e.points.lineWidth,r=e.shadowSize,i=e.points.radius,s=e.points.symbol;if(n>0&&r>0){var o=r/2;c.lineWidth=o;c.strokeStyle="rgba(0,0,0,0.1)";t(e.datapoints,i,null,o+o/2,!0,e.xaxis,e.yaxis,s);c.strokeStyle="rgba(0,0,0,0.2)";t(e.datapoints,i,null,o/2,!0,e.xaxis,e.yaxis,s)}c.lineWidth=n;c.strokeStyle=e.color;t(e.datapoints,i,at(e.points,e.color),0,!1,e.xaxis,e.yaxis,s);c.restore()}function ot(e,t,n,r,i,s,o,u,a,f,l,c){var h,p,d,v,m,g,y,b,w;if(l){b=g=y=!0;m=!1;h=n;p=e;v=t+r;d=t+i;if(p<h){w=p;p=h;h=w;m=!0;g=!1}}else{m=g=y=!0;b=!1;h=e+r;p=e+i;d=n;v=t;if(v<d){w=v;v=d;d=w;b=!0;y=!1}}if(p<u.min||h>u.max||v<a.min||d>a.max)return;if(h<u.min){h=u.min;m=!1}if(p>u.max){p=u.max;g=!1}if(d<a.min){d=a.min;b=!1}if(v>a.max){v=a.max;y=!1}h=u.p2c(h);d=a.p2c(d);p=u.p2c(p);v=a.p2c(v);if(o){f.beginPath();f.moveTo(h,d);f.lineTo(h,v);f.lineTo(p,v);f.lineTo(p,d);f.fillStyle=o(d,v);f.fill()}if(c>0&&(m||g||y||b)){f.beginPath();f.moveTo(h,d+s);m?f.lineTo(h,v+s):f.moveTo(h,v+s);y?f.lineTo(p,v+s):f.moveTo(p,v+s);g?f.lineTo(p,d+s):f.moveTo(p,d+s);b?f.lineTo(h,d+s):f.moveTo(h,d+s);f.stroke()}}function ut(e){function t(t,n,r,i,s,o,u){var a=t.points,f=t.pointsize;for(var l=0;l<a.length;l+=f){if(a[l]==null)continue;ot(a[l],a[l+1],a[l+2],n,r,i,s,o,u,c,e.bars.horizontal,e.bars.lineWidth)}}c.save();c.translate(v.left,v.top);c.lineWidth=e.bars.lineWidth;c.strokeStyle=e.color;var n;switch(e.bars.align){case"left":n=0;break;case"right":n=-e.bars.barWidth;break;case"center":n=-e.bars.barWidth/2;break;default:throw new Error("Invalid bar alignment: "+e.bars.align)}var r=e.bars.fill?function(t,n){return at(e.bars,e.color,t,n)}:null;t(e.datapoints,n,n+e.bars.barWidth,0,r,e.xaxis,e.yaxis);c.restore()}function at(t,n,r,i){var s=t.fill;if(!s)return null;if(t.fillColor)return Tt(t.fillColor,r,i,n);var o=e.color.parse(n);o.a=typeof s=="number"?s:.4;o.normalize();return o.toString()}function ft(){t.find(".legend").remove();if(!u.legend.show)return;var n=[],r=[],i=!1,s=u.legend.labelFormatter,a,f;for(var l=0;l<o.length;++l){a=o[l];if(a.label){f=s?s(a.label,a):a.label;f&&r.push({label:f,color:a.color})}}if(u.legend.sorted)if(e.isFunction(u.legend.sorted))r.sort(u.legend.sorted);else{var c=u.legend.sorted!="descending";r.sort(function(e,t){return e.label==t.label?0:e.label<t.label!=c?1:-1})}for(var l=0;l<r.length;++l){var h=r[l];if(l%u.legend.noColumns==0){i&&n.push("</tr>");n.push("<tr>");i=!0}n.push('<td class="legendColorBox"><div style="border:1px solid '+u.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+h.color+';overflow:hidden"></div></div></td>'+'<td class="legendLabel">'+h.label+"</td>")}i&&n.push("</tr>");if(n.length==0)return;var p='<table style="font-size:smaller;color:'+u.grid.color+'">'+n.join("")+"</table>";if(u.legend.container!=null)e(u.legend.container).html(p);else{var d="",m=u.legend.position,g=u.legend.margin;g[0]==null&&(g=[g,g]);m.charAt(0)=="n"?d+="top:"+(g[1]+v.top)+"px;":m.charAt(0)=="s"&&(d+="bottom:"+(g[1]+v.bottom)+"px;");m.charAt(1)=="e"?d+="right:"+(g[0]+v.right)+"px;":m.charAt(1)=="w"&&(d+="left:"+(g[0]+v.left)+"px;");var y=e('<div class="legend">'+p.replace('style="','style="position:absolute;'+d+";")+"</div>").appendTo(t);if(u.legend.backgroundOpacity!=0){var b=u.legend.backgroundColor;if(b==null){b=u.grid.backgroundColor;b&&typeof b=="string"?b=e.color.parse(b):b=e.color.extract(y,"background-color");b.a=1;b=b.toString()}var w=y.children();e('<div style="position:absolute;width:'+w.width()+"px;height:"+w.height()+"px;"+d+"background-color:"+b+';"> </div>').prependTo(y).css("opacity",u.legend.backgroundOpacity)}}}function ht(e,t,n){var r=u.grid.mouseActiveRadius,i=r*r+1,s=null,a=!1,f,l,c;for(f=o.length-1;f>=0;--f){if(!n(o[f]))continue;var h=o[f],p=h.xaxis,d=h.yaxis,v=h.datapoints.points,m=p.c2p(e),g=d.c2p(t),y=r/p.scale,b=r/d.scale;c=h.datapoints.pointsize;p.options.inverseTransform&&(y=Number.MAX_VALUE);d.options.inverseTransform&&(b=Number.MAX_VALUE);if(h.lines.show||h.points.show)for(l=0;l<v.length;l+=c){var w=v[l],E=v[l+1];if(w==null)continue;if(w-m>y||w-m<-y||E-g>b||E-g<-b)continue;var S=Math.abs(p.p2c(w)-e),x=Math.abs(d.p2c(E)-t),T=S*S+x*x;if(T<i){i=T;s=[f,l/c]}}if(h.bars.show&&!s){var N=h.bars.align=="left"?0:-h.bars.barWidth/2,C=N+h.bars.barWidth;for(l=0;l<v.length;l+=c){var w=v[l],E=v[l+1],k=v[l+2];if(w==null)continue;if(o[f].bars.horizontal?m<=Math.max(k,w)&&m>=Math.min(k,w)&&g>=E+N&&g<=E+C:m>=w+N&&m<=w+C&&g>=Math.min(k,E)&&g<=Math.max(k,E))s=[f,l/c]}}}if(s){f=s[0];l=s[1];c=o[f].datapoints.pointsize;return{datapoint:o[f].datapoints.points.slice(l*c,(l+1)*c),dataIndex:l,series:o[f],seriesIndex:f}}return null}function pt(e){u.grid.hoverable&&mt("plothover",e,function(e){return e["hoverable"]!=0})}function dt(e){u.grid.hoverable&&mt("plothover",e,function(e){return!1})}function vt(e){mt("plotclick",e,function(e){return e["clickable"]!=0})}function mt(e,n,r){var i=l.offset(),s=n.pageX-i.left-v.left,o=n.pageY-i.top-v.top,a=A({left:s,top:o});a.pageX=n.pageX;a.pageY=n.pageY;var f=ht(s,o,r);if(f){f.pageX=parseInt(f.series.xaxis.p2c(f.datapoint[0])+i.left+v.left,10);f.pageY=parseInt(f.series.yaxis.p2c(f.datapoint[1])+i.top+v.top,10)}if(u.grid.autoHighlight){for(var c=0;c<lt.length;++c){var h=lt[c];h.auto==e&&(!f||h.series!=f.series||h.point[0]!=f.datapoint[0]||h.point[1]!=f.datapoint[1])&&wt(h.series,h.point)}f&&bt(f.series,f.datapoint,e)}t.trigger(e,[a,f])}function gt(){var e=u.interaction.redrawOverlayInterval;if(e==-1){yt();return}ct||(ct=setTimeout(yt,e))}function yt(){ct=null;h.save();h.clearRect(0,0,m,g);h.translate(v.left,v.top);var e,t;for(e=0;e<lt.length;++e){t=lt[e];t.series.bars.show?xt(t.series,t.point):St(t.series,t.point)}h.restore();S(w.drawOverlay,[h])}function bt(e,t,n){typeof e=="number"&&(e=o[e]);if(typeof t=="number"){var r=e.datapoints.pointsize;t=e.datapoints.points.slice(r*t,r*(t+1))}var i=Et(e,t);if(i==-1){lt.push({series:e,point:t,auto:n});gt()}else n||(lt[i].auto=!1)}function wt(e,t){if(e==null&&t==null){lt=[];gt()}typeof e=="number"&&(e=o[e]);typeof t=="number"&&(t=e.data[t]);var n=Et(e,t);if(n!=-1){lt.splice(n,1);gt()}}function Et(e,t){for(var n=0;n<lt.length;++n){var r=lt[n];if(r.series==e&&r.point[0]==t[0]&&r.point[1]==t[1])return n}return-1}function St(t,n){var r=n[0],i=n[1],s=t.xaxis,o=t.yaxis,u=typeof t.highlightColor=="string"?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString();if(r<s.min||r>s.max||i<o.min||i>o.max)return;var a=t.points.radius+t.points.lineWidth/2;h.lineWidth=a;h.strokeStyle=u;var f=1.5*a;r=s.p2c(r);i=o.p2c(i);h.beginPath();t.points.symbol=="circle"?h.arc(r,i,f,0,2*Math.PI,!1):t.points.symbol(h,r,i,f,!1);h.closePath();h.stroke()}function xt(t,n){var r=typeof t.highlightColor=="string"?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString(),i=r,s=t.bars.align=="left"?0:-t.bars.barWidth/2;h.lineWidth=t.bars.lineWidth;h.strokeStyle=r;ot(n[0],n[1],n[2]||0,s,s+t.bars.barWidth,0,function(){return i},t.xaxis,t.yaxis,h,t.bars.horizontal,t.bars.lineWidth)}function Tt(t,n,r,i){if(typeof t=="string")return t;var s=c.createLinearGradient(0,r,0,n);for(var o=0,u=t.colors.length;o<u;++o){var a=t.colors[o];if(typeof a!="string"){var f=e.color.parse(i);a.brightness!=null&&(f=f.scale("rgb",a.brightness));a.opacity!=null&&(f.a*=a.opacity);a=f.toString()}s.addColorStop(o/(u-1),a)}return s}var o=[],u={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,timezone:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:!1},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},a=null,f=null,l=null,c=null,h=null,p=[],d=[],v={left:0,right:0,top:0,bottom:0},m=0,g=0,y=0,b=0,w={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},E=this;E.setData=N;E.setupGrid=V;E.draw=Y;E.getPlaceholder=function(){return t};E.getCanvas=function(){return a};E.getPlotOffset=function(){return v};E.width=function(){return y};E.height=function(){return b};E.offset=function(){var e=l.offset();e.left+=v.left;e.top+=v.top;return e
};E.getData=function(){return o};E.getAxes=function(){var t={},n;e.each(p.concat(d),function(e,n){n&&(t[n.direction+(n.n!=1?n.n:"")+"axis"]=n)});return t};E.getXAxes=function(){return p};E.getYAxes=function(){return d};E.c2p=A;E.p2c=O;E.getOptions=function(){return u};E.highlight=bt;E.unhighlight=wt;E.triggerRedrawOverlay=gt;E.pointOffset=function(e){return{left:parseInt(p[k(e,"x")-1].p2c(+e.x)+v.left,10),top:parseInt(d[k(e,"y")-1].p2c(+e.y)+v.top,10)}};E.shutdown=q;E.resize=function(){B();j(a);j(f)};E.hooks=w;x(E);T(i);F();N(r);V();Y();I();var lt=[],ct=null}function n(e,t){return t*Math.floor(e/t)}e.plot=function(n,r,i){var s=new t(e(n),r,i,e.plot.plugins);return s};e.plot.version="0.8-alpha";e.plot.plugins=[]})(jQuery);(function(e){function t(t){function s(e){if(n.active){h(e);t.getPlaceholder().trigger("plotselecting",[a()])}}function o(t){if(t.which!=1)return;document.body.focus();if(document.onselectstart!==undefined&&r.onselectstart==null){r.onselectstart=document.onselectstart;document.onselectstart=function(){return!1}}if(document.ondrag!==undefined&&r.ondrag==null){r.ondrag=document.ondrag;document.ondrag=function(){return!1}}c(n.first,t);n.active=!0;i=function(e){u(e)};e(document).one("mouseup",i)}function u(e){i=null;document.onselectstart!==undefined&&(document.onselectstart=r.onselectstart);document.ondrag!==undefined&&(document.ondrag=r.ondrag);n.active=!1;h(e);if(m())f();else{t.getPlaceholder().trigger("plotunselected",[]);t.getPlaceholder().trigger("plotselecting",[null])}return!1}function a(){if(!m())return null;if(!n.show)return null;var r={},i=n.first,s=n.second;e.each(t.getAxes(),function(e,t){if(t.used){var n=t.c2p(i[t.direction]),o=t.c2p(s[t.direction]);r[e]={from:Math.min(n,o),to:Math.max(n,o)}}});return r}function f(){var e=a();t.getPlaceholder().trigger("plotselected",[e]);e.xaxis&&e.yaxis&&t.getPlaceholder().trigger("selected",[{x1:e.xaxis.from,y1:e.yaxis.from,x2:e.xaxis.to,y2:e.yaxis.to}])}function l(e,t,n){return t<e?e:t>n?n:t}function c(e,r){var i=t.getOptions(),s=t.getPlaceholder().offset(),o=t.getPlotOffset();e.x=l(0,r.pageX-s.left-o.left,t.width());e.y=l(0,r.pageY-s.top-o.top,t.height());i.selection.mode=="y"&&(e.x=e==n.first?0:t.width());i.selection.mode=="x"&&(e.y=e==n.first?0:t.height())}function h(e){if(e.pageX==null)return;c(n.second,e);if(m()){n.show=!0;t.triggerRedrawOverlay()}else p(!0)}function p(e){if(n.show){n.show=!1;t.triggerRedrawOverlay();e||t.getPlaceholder().trigger("plotunselected",[])}}function d(e,n){var r,i,s,o,u=t.getAxes();for(var a in u){r=u[a];if(r.direction==n){o=n+r.n+"axis";!e[o]&&r.n==1&&(o=n+"axis");if(e[o]){i=e[o].from;s=e[o].to;break}}}if(!e[o]){r=n=="x"?t.getXAxes()[0]:t.getYAxes()[0];i=e[n+"1"];s=e[n+"2"]}if(i!=null&&s!=null&&i>s){var f=i;i=s;s=f}return{from:i,to:s,axis:r}}function v(e,r){var i,s,o=t.getOptions();if(o.selection.mode=="y"){n.first.x=0;n.second.x=t.width()}else{s=d(e,"x");n.first.x=s.axis.p2c(s.from);n.second.x=s.axis.p2c(s.to)}if(o.selection.mode=="x"){n.first.y=0;n.second.y=t.height()}else{s=d(e,"y");n.first.y=s.axis.p2c(s.from);n.second.y=s.axis.p2c(s.to)}n.show=!0;t.triggerRedrawOverlay();!r&&m()&&f()}function m(){var e=5;return Math.abs(n.second.x-n.first.x)>=e&&Math.abs(n.second.y-n.first.y)>=e}var n={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},r={},i=null;t.clearSelection=p;t.setSelection=v;t.getSelection=a;t.hooks.bindEvents.push(function(e,t){var n=e.getOptions();if(n.selection.mode!=null){t.mousemove(s);t.mousedown(o)}});t.hooks.drawOverlay.push(function(t,r){if(n.show&&m()){var i=t.getPlotOffset(),s=t.getOptions();r.save();r.translate(i.left,i.top);var o=e.color.parse(s.selection.color);r.strokeStyle=o.scale("a",.8).toString();r.lineWidth=1;r.lineJoin="round";r.fillStyle=o.scale("a",.4).toString();var u=Math.min(n.first.x,n.second.x)+.5,a=Math.min(n.first.y,n.second.y)+.5,f=Math.abs(n.second.x-n.first.x)-1,l=Math.abs(n.second.y-n.first.y)-1;r.fillRect(u,a,f,l);r.strokeRect(u,a,f,l);r.restore()}});t.hooks.shutdown.push(function(t,n){n.unbind("mousemove",s);n.unbind("mousedown",o);i&&e(document).unbind("mouseup",i)})}e.plot.plugins.push({init:t,options:{selection:{mode:null,color:"#e8cfac"}},name:"selection",version:"1.1"})})(jQuery);